<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Patricio</title>
    <!-- lucia mendiola -->
    </head>

<body>
    <h2>Patricio</h2>

    <table id="tabla">
        <tbody>
            <tr>
                <td id="n1"><img src="img/fila-1-columna-2.jpg" alt="1"></td>
                <td id="n2"><img src="img/fila-2-columna-1.jpg" alt="2"></td>
                <td id="n3"><img src="img/fila-1-columna-3.jpg" alt="3"></td>
            </tr>
            <tr>
                <td id="n4"><img src="img/fila-1-columna-1.jpg" alt="4"></td>
                <td id="blanco"></td>
                <td id="n6"><img src="img/fila-3-columna-2.jpg" alt="6"></td>
            </tr>
            <tr>
                <td id="n7"><img src="img/fila-3-columna-1.jpg" alt="7"></td>
                <td id="n8"><img src="img/fila-2-columna-3.jpg" alt="8"></td>
                <td id="n9"><img src="img/fila-2-columna-2.jpg" alt="9"></td>
            </tr>
        </tbody>
    </table><br>

    <button id="subir">Subir</button>
    <button id="bajar">Bajar</button>
    <button id="izquierda">Izquierda</button>
    <button id="derecha">Derecha</button>

    <script>

        const tabla = document.getElementById("tabla");
        const subir = document.getElementById("subir");
        const bajar = document.getElementById("bajar");
        const izquierda = document.getElementById("izquierda");
        const derecha = document.getElementById("derecha");

        
        function blanco() {
            return document.getElementById("blanco");
        }

        function intercambio(origen, destino) {
            const nT = document.createElement("td");
            origen.replaceWith(nT);
            destino.replaceWith(origen);
            nT.replaceWith(destino);
        }

        function celdaIzq(blanco) {
            return blanco.previousElementSibling;
        }

        function celdaDer(blanco) {
            return blanco.nextElementSibling;
        }

        function celdaArriba(blanco) {
            const fila = blanco.parentElement;
            const filaArriba = fila.previousElementSibling;
            if (!filaArriba) return null;
            return filaArriba.children[blanco.cellIndex];
        }

        function celdaAbajo(blanco) {
            const fila = blanco.parentElement;
            const filaAbajo = fila.nextElementSibling;
            if (!filaAbajo) return null;
            return filaAbajo.children[blanco.cellIndex];
        }

        

    // version 2
    function click(celdaClicada) {
        const b = getBlanco();

        if (celdaClicada.parentNode === b.parentNode) {
            if (celdaClicada.nextElementSibling === b || celdaClicada.previousElementSibling === b) {
                intercambio(b, celdaClicada);
            }
            return;
        }


        const filaClic = celdaClicada.parentNode;
        const filaB = b.parentNode;

        if (filaClic === filaB.previousElementSibling || filaClic === filaB.nextElementSibling) {

            const columna = b.cellIndex;
            const objetivo = filaClic.children[columna];

            if (objetivo === celdaClicada) {
                intercambio(b, celdaClicada);
            }
        }
    }

    const todasCeldas = document.querySelectorAll("#tabla td");
    todasCeldas.forEach(td => {
        if (td.id !== "blanco") {
            td.addEventListener("click", function() {
                click(td);
            });
        }
    });

    </script>

</body>
</html>





    // -------------------
    // VERSIÓN 3 - delegación (UN SOLO listener en la tabla)
    // -------------------
    tabla.addEventListener("click", function(e) {
        // buscamos el <td> más cercano al target (gestiona clics en img también)
        const td = e.target.closest("td");
        if (!td) return;
        if (td.id === "blanco") return;

        // reusamos la misma lógica que en click
        click(td);
    });